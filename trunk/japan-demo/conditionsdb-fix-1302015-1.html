<!DOCTYPE html>
<html lang="en">
<head>
  <title>Conditions Database Demo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <script src="lib/jquery-1.11.1.min.js" type="text/javascript"></script>
       <script src="lib/underscore-min.js" type="text/javascript"></script>
       <script src="lib/backbone-min.js" type="text/javascript"></script>
  <script src="lib/vendor/bootstrap.min.js" type="text/javascript"></script>
	<script src="lib/jquery-ui.custom.js" type="text/javascript"></script>

	<link href="css/skin-win8/ui.fancytree.css" rel="stylesheet" type="text/css">
	<script src="lib/jquery.fancytree.js" type="text/javascript"></script>


<script type="text/javascript">
      var treeData = 

[
	{"title": "<strong>Global Tags</strong>", "expanded": true, "folder": true, "children": [
		{"title": "TEST_GT1", "extraClasses": "yes", "children": [
			{"title": "<strong>Payloads</strong>", "extraClasses": "yes", "children": [
                                {"title": "Payload-1", "extraClasses": "yes", "children": [
				    {"title": "Module-1", "extraClasses": "yes", "children": [
					{"title": "IOV-1", "extraClasses": "answer"},
					{"title": "IOV-2", "extraClasses": "answer"},
                                        {"title": "IOV-3", "extraClasses": "answer"}
                                   ]}
				]}
			]}
		]},
                {"title": "TEST_GT2", "extraClasses": "answer"},
                {"title": "TEST_GT3", "extraClasses": "answer"},
                {"title": "TEST_GT4", "extraClasses": "answer"},
                {"title": "TEST_GT5", "extraClasses": "answer"},
                {"title": "TEST_GT6", "extraClasses": "answer"},
                {"title": "TEST_GT7", "extraClasses": "answer"},
                {"title": "TEST_GT8", "extraClasses": "answer"},
                {"title": "TEST_GT9", "extraClasses": "answer"},
                {"title": "TEST_GT10", "extraClasses": "answer"}
	]}
]
</script>



	<!-- Start_Exclude: This block is not part of the sample code -->
	<link href="css/prettify.css" rel="stylesheet">
	<script src="lib/prettify.js" type="text/javascript"></script>
	<link href="css/sample.css" rel="stylesheet" type="text/css">
	<script src="lib/sample.js" type="text/javascript"></script>

	<style type="text/css">
/*	span.fancytree-node span.fancytree-icon {
		background-image: url("skin-custom/bug.png");
		background-position: 0 0;
	}*/
	span.fancytree-node.no span.fancytree-icon {
		background-position: 0 0;
		background-image: url("skin-custom/exclamation.png");
	}
	span.fancytree-node.yes span.fancytree-icon {
		background-position: 0 0;
		background-image: url("skin-custom/accept.png");
	}
	span.fancytree-node.link span.fancytree-icon {
		background-position: 0 0;
		background-image: url("skin-custom/arrow_right.png");
	}
	span.fancytree-node.answer span.fancytree-icon {
		background-position: 0 0;
		background-image: url("skin-custom/emoticon_smile.png");
	}
        </style>
	<script type="text/javascript">
         function getval(index) {
           jQuery.getJSON( "http://offshoreweb.pnnl.gov:8080/b2s/rest/v1/globalTag/"+index, function( response ) {
           //console.dir(response)
           //console.log(response.globalTagId + " " + response.name + " " + response.desc + " " + response.dtmIns);
           document.getElementById('globaltagid').value = response.globalTagId;
//           document.getElementById('globaltagname').value = response.name;
//           document.getElementById('globaltagdescription').value = response.description;
//           document.getElementById('globaltagc').value = response.dtmIns;
           //document.getElementById('globaltagcreationdate').value = response.dtmIns;
           //document.getElementById('globaltagc').value = "CREATION DATE";
 //          document.getElementById('globaltagmodifydate').value = response.dtmMod;
 //          document.getElementById('globaltagisdefault').value = response.isDefault;
 //          document.getElementById('globaltagmodifiedby').value = response.modifiedBy;
 //          document.getElementById('globaltagtype').value = response.globalTagType.name;
 //          document.getElementById('globaltagtypedescription').value = response.globalTagType.description;
 //          document.getElementById('globaltagtypecreationdate').value = response.globalTagType.dtmIns;
 //          document.getElementById('globaltagtypemodifydate').value = response.globalTagType.dtmMod;
 //          document.getElementById('globaltagstatus').value = response.globalTagStatus.name;
 //          document.getElementById('globaltagstatusdescription').value = response.globalTagStatus.description;
 //          document.getElementById('globaltagstatuscreationdate').value = response.globalTagStatus.dtmIns;
 //          document.getElementById('globaltagstatusmodifydate').value = response.globalTagStatus.dtmMod;
           response['return'];
           });
          }
		$(function(){
			// using default options
			$("#tree").fancytree({
                                source:treeData,
        //			source: {url :"http://offshoreweb.pnnl.gov:8080/ajax-tree-gt.json"}
	//			source: {url :"http://offshoreweb.pnnl.gov:8080/b2s/rest/v1/globalTags"}
                                selectMode: 1,
                                checkbox: true,
                                select: function(event, data) {
                                // Display list of selected nodes
                                var s = data.tree.getSelectedNodes().join(", ");
                                var nodes = data.tree.getSelectedNodes();
                                if (nodes[0].getParent()) {
                                var parentnode = nodes[0].getParent();
                                if (!parentnode) {
                                  console.log("selected child is root node");
                                } else {
                                  var s = parentnode.title;
                                  if (s.indexOf("Global Tag") > -1)  {
                                     var gttitle =  nodes[0].title;
                                     var gtid = gttitle.substr(gttitle.length - 1); 
                                     getval(gtid);
                                  } else {
                                     console.log("This is not a global tag");
                                  }
                                }
                                }
                                //var gttitle =  console.log (nodes[0].title);
                                //var gtid = gttitle.substr(gttitle.length - 1); // => "1"
                        }
		});
});
	</script>


</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Conditions Database</a>
    </div>
    <div>
      <ul class="nav navbar-nav">
        <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Global Tags <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">New...</a></li>
            <li><a href="#">Edit...</a></li>
            <li><a href="#">Approval...</a></li>
          </ul>
        </li>
        <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Search<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Keyword...</a></li>
            <li><a href="#">Advanced...</a></li>
          </ul>
        </li>
      </li>
    </ul>
</nav>
  
<div class="container">
  <div class="row">     
    <div class="col-md-5">
        <table>
        <tr>
        <td>
	<label>Global Tag Directory<label>
        </td>
        </tr>
        <tr>
        <td>
        <div id="tree"></div>
        </td>
        </tr>
       </table>
<!--	<pre id="sourceCode" class="prettyprint" style="display:none"></pre>  -->
	<!-- End_Exclude -->
       </div>
    <div class="col-md-5">
        <table>
        <tr>
        <td>
         <label>Details:</label>
        </td>
        </tr>
        <tr>
        <td>
        <label>Global Tag Id:</label>
        </td>
        <td>
        <input id="globaltagid"/>
        </td>
        </tr>
        <tr>
        <td>
        <label>Global Tag Name:</label>
        </td>
        <td>
        <input id="globaltagname"/>
        </td>
        </tr>
        <tr>
        <td>
        <label>Global Tag Description:</label>
        </td>
        <td>
        <input id="globaltagdescription"/>
        </td>
        </tr>
        <td>
        <label>Global Tag Status:</label>
        </td>
        <td>
        <input id="globaltagstatus"/>
        </td>
        </tr>
         <tr>
         <td>
        <label>Global Tag Type:</label>
        </td>
        <td>
        <input id="globaltagtype"/>
        </td>
        </tr>
       </table>
 
    </div>


  </div>


</div>
<div class="navbar navbar-default navbar-fixed-bottom">
  <div class="container">
<!--    <span class="navbar-text">  -->
<div class="row">
  <div class="col-md-4">
    <div class="input-group" style="border:none" >
      <span class="input-group-addon" style="border:none" >
      <label>Select Role:</label>
        <input style="border:none"  type="radio"  name="role" value="C">Coordinator</input>
        <input style="border:none"  type="radio"  name="role" value="D">Developer</input>
        <input style="border:none"  type="radio"  name="role" value="G" checked="checked">General User</input>
      </span>
    </div><!-- /input-group -->
  </div><!-- /.col-md-4 -->
</div><!-- /.row -->
<!--    </span> -->
  </div>
</div>

</body>

</html>

